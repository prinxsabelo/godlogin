(this.webpackJsonpgodlogin=this.webpackJsonpgodlogin||[]).push([[0],{42:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),a=n(30),r=n.n(a),s=(n(42),n(9)),i=n(10),j=n(20),l=n(8),u=n.n(l),d=n(2),b=n(12),h=Object(c.createContext)(),O=n(0),g=function(){var e=Object(c.useContext)(h);console.log(u.a.get("token"));return Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Dashboard"}),Object(O.jsx)("button",{onClick:function(){e.setAuth(!1),u.a.remove("token")},children:"LogOut"})]})},x=n(17),p=n.n(x),m=n(31),f=n(14),v=function(){var e=Object(c.useState)({firstname:"",lastname:"",email:"",password:""}),t=Object(s.a)(e,2),n=t[0],o=t[1];return{handleRegister:function(e){},handleLogin:function(e){e&&(e.preventDefault(),console.log(n))},handleInputChange:function(e){console.log("xx"),e.persist(),o((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(f.a)({},e.target.name,e.target.value))}))},inputs:n}},w=n(32),k=n(33),N=n(37),y=n(36),C=function(e){Object(N.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(w.a)(this,n);for(var c=arguments.length,o=new Array(c),a=0;a<c;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).state={googleLoginUrl:null},e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/auth/google/url",{headers:new Headers({accept:"application/json"})}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong!")})).then((function(t){return e.setState({googleLoginUrl:t.url})})).catch((function(e){return console.error(e)})),console.log(this.state.googleLoginUrl)}},{key:"render",value:function(){var e=this.state.googleLoginUrl;return Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row justify-content-center mt-5",children:Object(O.jsx)("div",{className:"col-md-5 shadow p-3",children:Object(O.jsx)("div",{children:e&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("a",{className:"App-link btn btn-danger",href:e,children:"Continue with Google"})})})})})})}}]),n}(c.Component),S=n(34),L=n.n(S),F=function(){var e=u.a.get("xxx");console.log(e);var t=Object(c.useContext)(h),n=function(){var e=Object(m.a)(p.a.mark((function e(n){var c,o,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setAuth(!0),u.a.set("user","loginTrue"),n.preventDefault(),c=a.email,o=a.password,e.next=6,L()({method:"post",url:"/api/login",data:{email:c,password:o}});case 6:(r=e.sent).data&&(s=r.data.token,u.a.set("token",s)),console.log(r.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=v(),a=o.inputs,r=o.handleInputChange;return Object(O.jsxs)("form",{className:"container",onSubmit:n,children:[Object(O.jsx)("div",{className:"row justify-content-center my-5 mt-5 pt-5",children:Object(O.jsxs)("div",{className:"col-md-4 shadow my-auto",children:[Object(O.jsx)("h4",{className:"my-4",children:"Login Form"}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsx)("input",{type:"email",className:"form-control",placeholder:"Email Address",name:"email",value:a.email,onChange:r})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsx)("input",{type:"password",className:"form-control",placeholder:"Password..",autoComplete:"true",name:"password",value:a.password,onChange:r})}),Object(O.jsx)("div",{className:"form-group",children:Object(O.jsx)("button",{className:"w-100 btn btn-lg btn-primary",children:"Sign In"})}),Object(O.jsx)("div",{className:"px-2 font-bold py-2 ",children:Object(O.jsx)(b.b,{to:"/register",className:"font-weight-bold",children:"Register"})})]})}),Object(O.jsx)(C,{})]})},A=function(){var e=Object(d.g)(),t=Object(c.useContext)(h),n=Object(c.useState)(!1),o=Object(s.a)(n,2),a=o[0],r=o[1],i=Object(c.useState)(),j=Object(s.a)(i,2),l=j[0],b=j[1],g=Object(c.useState)(),x=Object(s.a)(g,2),p=x[0],m=x[1];return console.log(e),Object(c.useEffect)((function(){fetch("/api/auth/google/callback".concat(e.search),{headers:new Headers({accept:"application/json"})}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong!")})).then((function(e){return console.log(e.token),t.setAuth(!0),u.a.set("token",e.token),r(!1),m(e),Object(O.jsx)(d.a,{to:"/dashboard"})})).catch((function(e){r(!1),b(e),console.error(e)}))}),[t,e.search]),a?Object(O.jsx)("div",{children:"Loading...."}):l?Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:"Error:"}),Object(O.jsx)("code",{className:"Code-block",children:l.toString()})]})}):Object(O.jsxs)(O.Fragment,{children:[p&&Object(O.jsx)(d.a,{to:"/dashboard"}),Object(O.jsx)("div",{children:Object(O.jsxs)("details",{children:[Object(O.jsx)("p",{children:"Here is your info: "}),Object(O.jsx)("code",{className:"Code-block",children:JSON.stringify(p,null,2)})]})})]})},E=function(){return Object(O.jsxs)("div",{style:{padding:"50px"},children:[Object(O.jsx)("h3",{children:"Wanna build.."}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{children:"LOGIN"})})]})},I=function(){var e=Object(c.useContext)(h);return Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/",children:e.auth?Object(O.jsx)(d.a,{to:"/dashboard"}):Object(O.jsx)(E,{})}),Object(O.jsx)(P,{path:"/login",auth:e.auth,component:F}),Object(O.jsx)(d.b,{exact:!0,path:"/auth/google",component:A}),Object(O.jsx)(D,{path:"/dashboard",auth:e.auth,component:g})]})},D=function(e){var t=e.auth,n=e.component,c=Object(j.a)(e,["auth","component"]);return Object(O.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(){return t?Object(O.jsx)(n,{}):Object(O.jsx)(d.a,{to:"/login"})}}))},P=function(e){var t=e.auth,n=e.component,c=Object(j.a)(e,["auth","component"]);return Object(O.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{render:function(){return t?Object(O.jsx)(d.a,{to:"/dashboard"}):Object(O.jsx)(n,{})}}))};var U=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){u.a.get("token")&&o(!0)})),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.Provider,{value:{auth:n,setAuth:o},children:Object(O.jsx)(b.a,{children:Object(O.jsx)(I,{})})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)}))};r.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(U,{})}),document.getElementById("root")),H()}},[[68,1,2]]]);
//# sourceMappingURL=main.14559030.chunk.js.map