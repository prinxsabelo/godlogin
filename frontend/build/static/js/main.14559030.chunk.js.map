{"version":3,"sources":["context/AuthApi.js","Dashboard.js","CustomHooks.js","Social.js","Login.js","LoginGoogle.js","PublicHomePage.js","App.js","reportWebVitals.js","index.js"],"names":["AuthApi","createContext","Dashboard","Auth","useContext","console","log","Cookies","get","onClick","setAuth","remove","useSignUpForm","useState","firstname","lastname","email","password","inputs","setInputs","handleRegister","event","handleLogin","preventDefault","handleInputChange","persist","target","name","value","Social","state","googleLoginUrl","fetch","headers","Headers","accept","then","response","ok","json","Error","data","setState","url","catch","error","this","className","href","Component","Login","fetcher","e","a","set","axios","method","token","onSubmit","type","placeholder","onChange","autoComplete","to","LoginGoogle","location","useLocation","loading","setLoading","setError","user","setUser","useEffect","search","toString","JSON","stringify","PublicHomePage","style","padding","Routes","exact","path","auth","component","ProtectedRoute","rest","render","ProtectedLogin","App","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.14559030.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nconst AuthApi = createContext();\nexport default AuthApi;\n","import { useContext } from \"react\";\nimport Cookies from \"js-cookie\";\n\nimport AuthApi from \"./context/AuthApi\";\n\nexport const Dashboard = () => {\n    const Auth = useContext(AuthApi);\n    console.log(Cookies.get(\"token\"));\n    const handleLogout = () => {\n        Auth.setAuth(false);\n        Cookies.remove(\"token\");\n    };\n    return (\n        <div>\n            <h3>Dashboard</h3>\n            <button onClick={handleLogout}>LogOut</button>\n        </div>\n    );\n};\n","import { useState } from \"react\";\n\nconst useSignUpForm = () => {\n    const [inputs, setInputs] = useState({\n        firstname: \"\",\n        lastname: \"\",\n        email: \"\",\n        password: \"\",\n    });\n    \n    const handleRegister = (event) => {\n        // if (event) {\n        //     event.preventDefault();\n        //     console.log(inputs);\n        //     await fetch('/api/auth/normal/register',{\n        //         method: 'POST',\n        //         headers: {'Content-Type': 'application/json'},\n        //         body: JSON.stringify()\n        //     })\n        // }\n    };\n    const handleLogin = (event) => {\n        if (event) {\n            event.preventDefault();\n            console.log(inputs);\n        }\n    };\n    const handleInputChange = (event) => {\n        console.log(\"xx\");\n        event.persist();\n        setInputs((inputs) => ({\n            ...inputs,\n            [event.target.name]: event.target.value,\n        }));\n    };\n    return {\n        handleRegister,\n        handleLogin,\n        handleInputChange,\n        inputs,\n    };\n};\nexport default useSignUpForm;\n","import { Component } from \"react\";\n\nclass Social extends Component {\n    state = {\n        googleLoginUrl: null,\n    };\n\n    componentDidMount() {\n        fetch(\"/api/auth/google/url\", {\n            headers: new Headers({ accept: \"application/json\" }),\n        })\n            .then((response) => {\n                if (response.ok) {\n                    return response.json();\n                }\n                throw new Error(\"Something went wrong!\");\n            })\n            .then((data) => this.setState({ googleLoginUrl: data.url }))\n            .catch((error) => console.error(error));\n        console.log(this.state.googleLoginUrl);\n    }\n\n    render() {\n        const { googleLoginUrl } = this.state;\n        return (\n            <div className=\"container\">\n                <div className=\"row justify-content-center mt-5\">\n                    <div className=\"col-md-5 shadow p-3\">\n                        <div>\n                            {googleLoginUrl && (\n                                <>\n                                    <a\n                                        className=\"App-link btn btn-danger\"\n                                        href={googleLoginUrl}\n                                    >\n                                        Continue with Google\n                                    </a>\n                                    {/* <div>{googleLoginUrl}</div> */}\n                                </>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default Social;\n","import { useContext } from \"react\";\nimport Cookies from \"js-cookie\";\nimport useSignUpForm from \"./CustomHooks\";\n\nimport AuthApi from \"./context/AuthApi\";\nimport Social from \"./Social\";\nimport { NavLink } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst Login = () => {\n    let fetcher = Cookies.get(\"xxx\");\n    console.log(fetcher);\n    const Auth = useContext(AuthApi);\n    const handleLogin = async (e) => {\n        Auth.setAuth(true);\n        Cookies.set(\"user\", \"loginTrue\");\n\n        e.preventDefault();\n        const { email, password } = inputs;\n        let response = await axios({\n            method: \"post\",\n            url: \"/api/login\",\n            data: {\n                email,\n                password,\n            },\n        });\n        if (response.data) {\n            const { token } = response.data;\n            Cookies.set(\"token\", token);\n        }\n        console.log(response.data);\n    };\n    const { inputs, handleInputChange } = useSignUpForm();\n    return (\n        <form className=\"container\" onSubmit={handleLogin}>\n            <div className=\"row justify-content-center my-5 mt-5 pt-5\">\n                <div className=\"col-md-4 shadow my-auto\">\n                    <h4 className=\"my-4\">Login Form</h4>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"email\"\n                            className=\"form-control\"\n                            placeholder=\"Email Address\"\n                            // required\n                            name=\"email\"\n                            value={inputs.email}\n                            onChange={handleInputChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <input\n                            type=\"password\"\n                            className=\"form-control\"\n                            placeholder=\"Password..\"\n                            // required\n                            autoComplete=\"true\"\n                            name=\"password\"\n                            value={inputs.password}\n                            onChange={handleInputChange}\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <button className=\"w-100 btn btn-lg btn-primary\">\n                            Sign In\n                        </button>\n                    </div>\n\n                    <div className=\"px-2 font-bold py-2 \">\n                        <NavLink to=\"/register\" className=\"font-weight-bold\">\n                            Register\n                        </NavLink>\n                    </div>\n                </div>\n            </div>\n            <Social />\n        </form>\n    );\n};\nexport default Login;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport AuthApi from \"./context/AuthApi\";\nimport Cookies from \"js-cookie\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nconst LoginGoogle = () => {\n    const location = useLocation();\n    const Auth = useContext(AuthApi);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n    const [user, setUser] = useState();\n    console.log(location);\n    useEffect(() => {\n        fetch(`/api/auth/google/callback${location.search}`, {\n            headers: new Headers({ accept: \"application/json\" }),\n        })\n            .then((response) => {\n                if (response.ok) {\n                    return response.json();\n                }\n                throw new Error(\"Something went wrong!\");\n            })\n            .then((data) => {\n                console.log(data.token);\n                Auth.setAuth(true);\n                Cookies.set(\"token\", data.token);\n                setLoading(false);\n                setUser(data);\n                return <Redirect to=\"/dashboard\" />;\n\n                // this.setState({ loading: false, data });\n            })\n            .catch((error) => {\n                setLoading(false);\n                setError(error);\n                // this.setState({ loading: false, error });\n                console.error(error);\n            });\n    }, [Auth, location.search]);\n\n    if (loading) {\n        return <div>Loading....</div>;\n    }\n\n    if (error) {\n        return (\n            <>\n                <div>\n                    <p>Error:</p>\n                    <code className=\"Code-block\">{error.toString()}</code>\n                </div>\n            </>\n        );\n    }\n    return (\n        <>\n            {user && <Redirect to=\"/dashboard\" />}\n\n            <div>\n                <details>\n                    {/* <summary>Welcome {data.user.name}</summary> */}\n                    {/* Login for google first here.. */}\n                    <p>Here is your info: </p>\n                    <code className=\"Code-block\">\n                        {JSON.stringify(user, null, 2)}\n                    </code>\n                </details>\n            </div>\n        </>\n    );\n};\nexport default LoginGoogle;\n","export const PublicHomePage = () => {\n    return (\n        <div style={{ padding: \"50px\" }}>\n            <h3>Wanna build..</h3>\n            <div>\n                <button>LOGIN</button>\n            </div>\n        </div>\n    );\n};\n","import Cookies from \"js-cookie\";\nimport { useContext, useEffect, useState } from \"react\";\nimport {\n    Route,\n    BrowserRouter as Router,\n    Switch,\n    Redirect,\n} from \"react-router-dom\";\nimport AuthApi from \"./context/AuthApi\";\nimport { Dashboard } from \"./Dashboard\";\nimport Login from \"./Login\";\nimport LoginGoogle from \"./LoginGoogle\";\nimport { PublicHomePage } from \"./PublicHomePage\";\n\nconst Routes = () => {\n    const Auth = useContext(AuthApi);\n    return (\n        <Switch>\n            <Route exact path=\"/\">\n                {Auth.auth ? <Redirect to=\"/dashboard\" /> : <PublicHomePage />}\n            </Route>\n            <ProtectedLogin path=\"/login\" auth={Auth.auth} component={Login} />\n            \n            <Route exact path=\"/auth/google\" component={LoginGoogle} />\n            <ProtectedRoute\n                path=\"/dashboard\"\n                auth={Auth.auth}\n                component={Dashboard}\n            />\n        </Switch>\n    );\n};\nconst ProtectedRoute = ({ auth, component: Component, ...rest }) => {\n    return (\n        <Route\n            {...rest}\n            render={() => (auth ? <Component /> : <Redirect to=\"/login\" />)}\n        />\n    );\n};\nconst ProtectedLogin = ({ auth, component: Component, ...rest }) => {\n    return (\n        <Route\n            {...rest}\n            render={() =>\n                !auth ? <Component /> : <Redirect to=\"/dashboard\" />\n            }\n        />\n    );\n};\nfunction App() {\n    const [auth, setAuth] = useState(false);\n    const readCookie = () => {\n        const user = Cookies.get(\"token\");\n        if (user) {\n            setAuth(true);\n        }\n    };\n    useEffect(() => {\n        readCookie();\n    });\n\n    return (\n        <>\n            <AuthApi.Provider value={{ auth, setAuth }}>\n                <Router>\n                    <Routes />\n                </Router>\n            </AuthApi.Provider>\n        </>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}